//// @author: Roman Semenikhin// @version=4//// Created by Roman Semenikhin on 23.08.2021// Copyright © 2021 Roman Semenikhin. All rights reserved.//// Headerstitle = "LineGrid View v1.0"shorttitle = ""study(title, shorttitle, true, format.price, 2)// SettingsloopRepeating = input(title="Сколько линий рисовать", type=input.integer, defval=5)sign = input(title="Умножаем или делим? (* или /)", type=input.string, defval="*")startPrice = input(title="Начинать с мин. (0) или макс. (1) цены?", type=input.integer, defval=0)lineColor = color.aqualineStyle = line.style_solid // line.style_dotted, line.style_solidlineWidth = 1// get min pricebars = array.new_float(0)for i = 0 to bar_index+1    array.push(bars, low[i])minPrice = array.min(bars)// get max pricefor i = 0 to bar_index+1    array.push(bars, high[i])maxPrice = array.max(bars)// fibonaccifib = array.new_int(0)array.push(fib,0)array.push(fib,1)for i=2 to loopRepeating    array.push(fib, array.get(fib,i-1)+array.get(fib,i-2))// mainf_draw(repeatCount, sign, startPrice, color, style, width) =>     _curPrice = startPrice    for i = 1 to repeatCount        line = line.new(time[4999], _curPrice, time[1], _curPrice, xloc=xloc.bar_time)                if (sign == "*")            _curPrice *= array.get(fib, i)        if (sign == "/")            _curPrice /= array.get(fib, i)                    line.set_color(line,color)        line.set_width(line,width)        line.set_style(line,style)        line.set_extend(line,extend.right)if (startPrice == 0)    f_draw(loopRepeating, sign, minPrice, lineColor, lineStyle, lineWidth)if (startPrice == 1)    f_draw(loopRepeating, sign, maxPrice, lineColor, lineStyle, lineWidth)// plot(close) // цена закрытия// plot(open) // цена открытия// plot(high) // текущая максимальная цена// plot(low) // текущая минимальная цена